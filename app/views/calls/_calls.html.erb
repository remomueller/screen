<%= render partial: 'layouts/per_page', locals: { object_count: @calls.total_count, type: 'calls' } %>

<table class="table table-striped">
  <thead>
    <tr>
      <th style="white-space:nowrap"><%== sort_field_helper(@order, 'calls.patient_id', 'Patient', 'calls_search') %></th>
      <th style="white-space:nowrap"><%== sort_field_helper(@order, 'calls.response', 'Response', 'calls_search') %></th>
      <th style="white-space:nowrap"><%== sort_field_helper(@order, 'calls.call_time', 'Call time', 'calls_search') %></th>
      <th>Berlin</th>
      <th>ESS</th>
      <th style="white-space:nowrap"><%== sort_field_helper(@order, 'calls.eligibility', 'Eligibility', 'calls_search') %></th>
      <th>Comments</th>
    </tr>
  </thead>

  <% @calls.each do |call| %>
    <tr>
      <td><%= link_to call.patient.phi_code(current_user), call.patient if call.patient %></td>
      <td><%= call.response_name %></td>
      <td><%= link_to simple_time(call.call_time), call %></td>
      <td><%= call.berlin %></td>
      <td><%= call.ess %></td>
      <td><%= call.eligibility %></td>
      <td><%= call.comments %></td>
    </tr>
  <% end %>
</table>

<center><%= paginate @calls, theme: "contour" %></center>
