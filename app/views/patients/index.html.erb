<% @title = "Patients" %>
<div class="page-header">
  <h1>
    <%= @title %>
    <%= link_to "Create Patient", new_patient_path, class: 'btn btn-mini btn-primary' %>
  </h1>
</div>

<%= form_tag patients_path, method: :get, remote: true, id: "patients_search", class: 'form-search' do %>
  <%= hidden_field_tag :order %>

  <div class="row">
    <div class="span4 control-group">
      <%= label :mrn, 'Search', class: 'control-label' %>
      <div class="controls">
        <%= text_field_tag :mrn, params[:mrn] %>
      </div>
    </div>
    <div class="span4 control-group">
      <%= label :priority_only, 'Priority Only', class: 'control-label' %>
      <div class="controls">
        <%= check_box_tag :priority_only, '1', false, onclick: "$('#patients_search').submit()" %>
      </div>
    </div>
    <div class="span4 control-group">
      <%= label :priority_message, 'Priority Message', class: 'control-label' %>
      <div class="controls">
        <%= select_tag :priority_message, options_for_select([['---', nil]] + Patient::PRIORITY_MESSAGES, params[:priority_message]) %>
      </div>
    </div>
  </div>
  <div class="form-actions">
    <%= submit_tag 'Filter Search', class: 'btn btn-primary' %>
  </div>
<% end %>

<div id="patients"><center><%= image_tag "contour/ajax-loader.gif" %></center></div>

<%= javascript_tag do %>
  $(function(){
    $.get($("#patients_search").attr("action"), $("#patients_search").serialize(), null, "script");
  });
<% end %>
