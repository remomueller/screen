<div style="float:right">
  Per Page
  <span class="per_page">
    20
  </span>
</div>

<div style="clear:both"></div>

<% items = ['mrn', 'first_name', 'last_name', 'phone_home', 'phone_day', 'phone_alt', 'sex', 'age'] %>

<div class="frame">
  <table style="width:100%;table-layout:fixed">
    <tr>
      <% items.each do |item| %>
        <th><%= item.titleize %></th>
      <% end %>
      <th>Latest Event</th>
    </tr>

  <% @patients.each do |patient| %>
    <tr onmouseover="$('.patient_<%= patient.id %>_short').hide();$('.patient_<%= patient.id %>').show();" onmouseout="$('.patient_<%= patient.id %>').hide();$('.patient_<%= patient.id %>_short').show();">
      <% items.each do |item| %>
        <td><span class="patient_<%= patient.id %>_short"><%= patient.send(item).to_s.first %></span><span class="patient_<%= patient.id %>" style="display:none"><%= link_to_if item == 'mrn', patient.send(item), patient %></span></td>
      <% end %>
      <td style="white-space:nowrap"><%= image_tag "gentleface/16/#{patient.events.first.image}.png", alt: '', style: 'vertical-align:text-bottom' if patient.events.first %> <%= link_to patient.events.first.name, patient.events.first if patient.events.first %></td>
    </tr>
  <% end %>
  </table>
</div>

<center><%= paginate @patients %></center>
