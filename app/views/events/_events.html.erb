<div style="float:right">
  Per Page
  <span class="per_page">
    20
  </span>
</div>

<div style="clear:both"></div>

<div class="frame">
  <table style="width:100%">
    <tr>
      <% unless params[:hide_patient] == '1' %><th>Patient</th><% end %>
      <th>Event</th>
      <th><%== sort_field_helper(@order, 'events.event_time', 'Time', 'events_search') %></th>
      <th>Eligibility</th>
      <th>Exclusion</th>
    </tr>

  <% @events.each do |event| %>
    <% object = event.class_name.constantize.find_by_id(event.class_id) %>
    <tr>
      <% unless params[:hide_patient] == '1' %><td><%= link_to event.patient.code, event.patient if event.patient %></td><% end %>
      <td>
        <%= image_tag "gentleface/16/#{event.image}.png", alt: '', style: 'vertical-align:text-bottom' %>
        <% if object.class.name == 'Evaluation' %>
          <%= link_to "#{object.administration_type_name} #{event.name}", object %>
        <% else %>
          <%= link_to event.name, object %>
        <% end %>
      </td>
      <td><%= simple_time(event.event_time) %></td>
      <td><%= object.eligibility %></td>
      <td><%= object.exclusion_name %></td>
    </tr>
  <% end %>
  </table>
</div>

<center><%= paginate @events %></center>
